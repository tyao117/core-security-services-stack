{
    "products": [
        {
            "label": "Core Security Services",
            "name": "core-security-services-stack",
            "version": "0.0.1",
            "product_kind": "solution",
            "tags": [
                "security",
                "Technology",
                "SoftwareAndPlatformApplications"
            ],
            "keywords": [
                "kms",
                "scc",
                "secrets manager",
                "security-compliance-center",
                "keyprotect",
                "IaC",
                "infrastructure as code",
                "security and compliance center",
                "terraform",
                "solution",
                "secrets",
                "key protect",
                "compliance"
            ],
            "short_description": "This architecture supports deploying core security services - Key Protect, Secrets Manager, Security and Compliance Center.",
            "long_description": "This architecture supports deploying core security services like Key Protect, Secrets Manager, Security and Compliance Center.",
            "provider_name": "Community",
            "offering_docs_url": "https://github.com/terraform-ibm-modules/terraform-ibm-base-security-services-da/blob/main/README.md",
            "offering_icon_url": "https://globalcatalog.cloud.ibm.com/api/v1/1082e7d2-5e2f-0a11-a3bc-f88a8e1931fc/artifacts/terraform.svg",
            "features": [
                {
                    "title": "Creates an IBM Key Protect instance",
                    "description": "Creates and configures IBM Key Protect instance and creates root keys for Cloud Object Storage and Secrets Manager."
                },
                {
                    "title": "Creates an IBM Secrets Manager Instance ",
                    "description": "Creates and configures an IBM Secrets Manager Instance."
                },
                {
                    "title": "Creates an IBM Security and Compliance Center Instance",
                    "description": "Creates and configures an IBM Security Compliance Center Instance."
                },
                {
                    "title": "Creates an IBM Cloud Object Storage Instance",
                    "description": "Creates and configures an IBM Cloud Object Storage Instance and a COS bucket that is encrypted by Key Protect"
                },
                {
                    "title": "Creates Service to Service Authorizations.",
                    "description": "Creates and configures service-to-service authorizations for the following: KMS, COS, Secrets Manager, and SCC"
                }
            ],
            "flavors": [
                {
                    "label": "Standard",
                    "name": "Standard",
                    "licenses": [
                        {
                            "id": "LICENSE",
                            "name": "LICENSE",
                            "type": "text/plain",
                            "description": "LICENSE"
                        }
                    ],
                    "compliance": {
                        "authority": "scc-v3",
                        "profiles": [
                            {
                                "profile_name": "CIS IBM Cloud Foundations Benchmark",
                                "profile_version": "1.0.0"
                            }
                        ]
                    },
                    "iam_permissions": [
                        {
                            "service_name": "cloud-object-storage",
                            "role_crns": [
                                "crn:v1:bluemix:public:iam::::serviceRole:Manager"
                            ]
                        },
                        {
                            "service_name": "secrets-manager",
                            "role_crns": [
                                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                                "crn:v1:bluemix:public:iam::::role:Editor",
                                "crn:v1:bluemix:public:iam::::role:Administrator",
                                "crn:v1:bluemix:public:iam::::role:Operator"
                            ]
                        },
                        {
                            "service_name": "kms",
                            "role_crns": [
                                "crn:v1:bluemix:public:iam::::serviceRole:Manager"
                            ]
                        },
                        {
                            "service_name": "compliance",
                            "role_crns": [
                                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                                "crn:v1:bluemix:public:iam::::role:Operator",
                                "crn:v1:bluemix:public:iam::::role:Administrator",
                                "crn:v1:bluemix:public:iam::::role:Editor"
                            ]
                        }
                    ],
                    "architecture": {
                        "features": [
                            {
                                "title": "Creates IBM Cloud Base Security Services in a resource group.",
                                "description": "Creates a resource group called base-security-services or uses a preexisting one"
                            },
                            {
                                "title": "Creates an IBM Key Protect Instance",
                                "description": "Creates and configures an IBM Key Protect Instance and creates root keys for Secret Manager and COS."
                            },
                            {
                                "title": "Creates an IBM Secrets Manager Instance ",
                                "description": "Creates and configures an IBM Secrets Manager Instance"
                            },
                            {
                                "title": "Creates an IBM Security and Compliance Center Instance",
                                "description": "Creates and configures an IBM Security Compliance Center Instance"
                            },
                            {
                                "title": "Creates Service-to-Service Authorizations",
                                "description": "Creates and configures service-to-service authorizations for the following: KMS, COS, and SCC"
                            }
                        ],
                        "diagrams": [
                            {
                                "diagram": {
                                    "url_proxy": {
                                        "url": "https://github.com/tyao117/base-security-services/blob/main/reference-architecture/base-security-services.svg"
                                    },
                                    "caption": "IBM Cloud Base Security Services",
                                    "type": "image/svg+xml"
                                },
                                "description": "This architecture supports creating and configuring an IBM Cloud Base Security services in a resource group."
                            }
                        ]
                    },
                    "configuration": [
                        {
                            "key": "cos_instance_name",
                            "type": "string",
                            "default_value": "base-security-services-cos",
                            "description": "The name to use when creating the Cloud Object Storage instance.",
                            "required": false
                        },
                        {
                            "key": "existing_activity_tracker_crn",
                            "type": "string",
                            "default_value": "__NULL__",
                            "description": "(Optional) The CRN of an existing Activity Tracker instance. Used to send COS bucket log data and all object write events to Activity Tracker.",
                            "required": false
                        },
                        {
                            "key": "existing_cos_instance_crn",
                            "type": "string",
                            "default_value": "__NULL__",
                            "description": "The CRN of an existing Cloud Object Storage instance. If not supplied, a new instance will be created.",
                            "required": false
                        },
                        {
                            "key": "existing_en_crn",
                            "type": "string",
                            "default_value": "__NULL__",
                            "description": "(Optional) The CRN of an existing Event Notification instance. Used to integrate with both SCC and Secrets Manager.",
                            "required": false
                        },
                        {
                            "key": "existing_kms_crn",
                            "type": "string",
                            "default_value": "__NULL__",
                            "description": "The CRN of an existing KMS instance to use. If not supplied, a new Key Protect instance will be created.",
                            "required": false
                        },
                        {
                            "key": "existing_monitoring_crn",
                            "type": "string",
                            "default_value": "__NULL__",
                            "description": "(Optional) The CRN of an existing IBM Cloud Monitoring instance. Used to send all COS bucket request and usage metrics to.",
                            "required": false
                        },
                        {
                            "key": "existing_resource_group",
                            "type": "boolean",
                            "default_value": false,
                            "description": "Whether to use an existing resource group.",
                            "required": false
                        },
                        {
                            "key": "existing_scc_cos_bucket_name",
                            "type": "string",
                            "default_value": "__NULL__",
                            "description": "The name of an existing bucket inside the existing Cloud Object Storage instance to use for SCC. If not supplied, a new bucket will be created. ",
                            "required": false
                        },
                        {
                            "key": "existing_scc_cos_kms_key_crn",
                            "type": "string",
                            "default_value": "__NULL__",
                            "description": "The CRN of an existing KMS key to use for the SCC COS bucket. If not supplied, a new key ring and key will be created.",
                            "required": false
                        },
                        {
                            "key": "existing_sm_kms_key_crn",
                            "type": "string",
                            "default_value": "__NULL__",
                            "description": "The CRN of an existing KMS key to use for Secrets Manager. If not supplied, a new key ring and key will be created.",
                            "required": false
                        },
                        {
                            "key": "ibmcloud_api_key",
                            "type": "password",
                            "description": "The API KEY to use for IBM Cloud.",
                            "required": true
                        },
                        {
                            "key": "key_protect_instance_name",
                            "type": "string",
                            "default_value": "base-security-services-kms",
                            "description": "The name to give the Key Protect instance that will be provisioned by this solution. Only used if not supplying an existing KMS resources.",
                            "required": false
                        },
                        {
                            "key": "kms_region",
                            "type": "string",
                            "default_value": "us-south",
                            "description": "The region in which to provision KMS resources. If using existing resources, set this to the region in which they belong to.",
                            "required": false
                        },
                        {
                            "key": "management_endpoint_type_for_bucket",
                            "type": "string",
                            "default_value": "private",
                            "description": "The type of endpoint for the IBM terraform provider to use to manage COS buckets. (`public`, `private` or `direct`). Ensure to enable virtual routing and forwarding (VRF) in your account if using `private`, and that the terraform runtime has access to the the IBM Cloud private network.",
                            "required": false
                        },
                        {
                            "key": "provision_scc_instance",
                            "type": "boolean",
                            "default_value": true,
                            "description": "Whether to provision an SCC instance.",
                            "required": false
                        },
                        {
                            "key": "provision_sm_instance",
                            "type": "boolean",
                            "default_value": true,
                            "description": "Whether to provision a Secrets Manager instance.",
                            "required": false
                        },
                        {
                            "key": "resource_group_name",
                            "type": "string",
                            "default_value": "base-security-services",
                            "description": "The name of a new or an existing resource group in which to provision all resources to.",
                            "required": false
                        },
                        {
                            "key": "scc_cos_bucket_class",
                            "type": "string",
                            "default_value": "smart",
                            "description": "The storage class of the newly provisioned SCC COS bucket. Allowed values are: 'standard', 'vault', 'cold', 'smart' (default value), 'onerate_active'",
                            "required": false
                        },
                        {
                            "key": "scc_cos_bucket_name",
                            "type": "string",
                            "default_value": "base-security-services-bucket",
                            "description": "The name to use when creating the SCC Cloud Object Storage bucket (NOTE: bucket names are globally unique).",
                            "required": false
                        },
                        {
                            "key": "scc_cos_bucket_region",
                            "type": "string",
                            "default_value": "us-south",
                            "description": "The region in which to provision the SCC COS bucket.",
                            "required": false
                        },
                        {
                            "key": "scc_cos_kms_key_ring_name",
                            "type": "string",
                            "default_value": "base-security-services-scc-cos-key-ring",
                            "description": "The name of the KMS Key Ring to create for the SCC COS bucket key. Only used if no value passed for `existing_scc_cos_kms_key_crn`.",
                            "required": false
                        },
                        {
                            "key": "scc_cos_kms_root_key_name",
                            "type": "string",
                            "default_value": "base-security-services-scc-cos-key",
                            "description": "The name of the KMS Key to create for the SCC COS bucket. Only used if no value passed for `existing_scc_cos_kms_key_crn`.",
                            "required": false
                        },
                        {
                            "key": "scc_instance_name",
                            "type": "string",
                            "default_value": "base-security-services-scc",
                            "description": "The name to give the SCC instance that will be provisioned by this solution. Only used if `provision_scc_instance` is set to true.",
                            "required": false
                        },
                        {
                            "key": "scc_region",
                            "type": "string",
                            "default_value": "us-south",
                            "description": "The region in which to provision the SCC instance.",
                            "required": false
                        },
                        {
                            "key": "scc_service_plan",
                            "type": "string",
                            "default_value": "security-compliance-center-standard-plan",
                            "description": "The service/pricing plan to use when provisioning a new Security Compliance Center instance. Allowed values are: 'security-compliance-center-standard-plan' (default value) and 'security-compliance-center-trial-plan'. Only used if `provision_scc_instance` is set to true.",
                            "required": false
                        },
                        {
                            "key": "service_endpoints",
                            "type": "string",
                            "default_value": "public-and-private",
                            "description": "The service endpoints to enable for all services deployed by this solution. Allowed values are `private` or `public-and-private`. If selecting `public-and-private`, communication to the instances will all be done over the public endpoints. Ensure to enable virtual routing and forwarding (VRF) in your account if using `private`, and that the terraform runtime has access to the the IBM Cloud private network.",
                            "required": false
                        },
                        {
                            "key": "skip_cos_kms_auth_policy",
                            "type": "boolean",
                            "default_value": false,
                            "description": "Set to true to skip the creation of an IAM authorization policy that permits the COS instance created to read the encryption key from the KMS instance. WARNING: An authorization policy must exist before an encrypted bucket can be created",
                            "required": false
                        },
                        {
                            "key": "skip_scc_cos_auth_policy",
                            "type": "boolean",
                            "default_value": false,
                            "description": "Set to true to skip the creation of an IAM authorization policy that permits the SCC instance created by this solution write access to the COS instance. Only used if `provision_scc_instance` is set to true.",
                            "required": false
                        },
                        {
                            "key": "skip_sm_en_auth_policy",
                            "type": "boolean",
                            "default_value": false,
                            "description": "Set to true to skip the creation of an IAM authorization policy that permits all Secrets Manager instances (scoped to the resource group) an 'Event Source Manager' role to the given Event Notifications instance passed in the `existing_en_instance_crn` input variable. In addition, no policy is created if `enable_event_notification` is set to false.",
                            "required": false
                        },
                        {
                            "key": "skip_sm_kms_auth_policy",
                            "type": "boolean",
                            "default_value": false,
                            "description": "Set to true to skip the creation of an IAM authorization policy that permits all Secrets Manager instances in the resource group to read the encryption key from the KMS instance.",
                            "required": false
                        },
                        {
                            "key": "sm_instance_name",
                            "type": "string",
                            "default_value": "base-security-services-sm",
                            "description": "The name to use when creating the Secrets Manager instance. Only used if `provision_sm_instance` is set to true.",
                            "required": false
                        },
                        {
                            "key": "sm_kms_key_ring_name",
                            "type": "string",
                            "default_value": "base-security-services-sm-key-ring",
                            "description": "The name of the KMS Key Ring to create for the Secrets Manager key. Only used if no value passed for `existing_sm_kms_key_crn`.",
                            "required": false
                        },
                        {
                            "key": "sm_kms_root_key_name",
                            "type": "string",
                            "default_value": "base-security-services-sm-key",
                            "description": "The name of the KMS Key to create for Secrets Manager. Only used if no value passed for `existing_sm_kms_key_crn`.",
                            "required": false
                        },
                        {
                            "key": "sm_region",
                            "type": "string",
                            "default_value": "us-south",
                            "description": "The region in which to provision the Secrets Manager instance.",
                            "required": false
                        },
                        {
                            "key": "sm_service_plan",
                            "type": "string",
                            "default_value": "standard",
                            "description": "The service/pricing plan to use when provisioning a new Secrets Manager instance. Allowed values: 'standard' and 'trial'. Only used if `provision_sm_instance` is set to true.",
                            "required": false
                        }
                    ],
                    "install_type": "fullstack"
                }
            ]
        }
    ]
}
